---
title: "Séances de travaux pratiques — Analyse de données"
author: "Alexandre Michaux"
date: "`r Sys.Date()`"
output:
  html_document:
    theme: flatly
    highlight: textmate
    toc: true
    toc_float: true
    number_sections: true
    code_folding: show
    df_print: paged
---

# TP 0
Faire une matrice 10x10 de nombres aléatoires suivant une loi normale (moyenne=0, écart-type=1). Arrondir les valeurs à 1 chiffre après la virgule. Utiliser la fonction `set.seed(20)` avant de générer les nombres aléatoires pour obtenir toujours la même matrice.
```{r}
set.seed(20)
M=matrix(round(rnorm(100),1),nrow=10)
```

Afficher la matrice.
```{r}
dim(M)
nrow(M)
ncol(M)
names(M)
rownames(M)
dimnames(M)
```

La position des nombres par rapport à la virgule indique s’il s’agit de lignes ou de colonnes (la première position est la ligne, la deuxième la colonne). Par exemple, le nombre à la position (3,5) est le nombre situé à la 3ème ligne et à la 5ème colonne.
```{r}
M[4,] # affiche la 4eme ligne de M.
M[,5] # affiche la 5eme colonne de M.
M[1,4] #affiche l’élément situé à la 1 ligne et 4eme colonne
M[1 :4,]# les 4emes premières lignes de M
M[,1 :4]# les 4emes premières colonnes de M
M[-4,]# Enlève la 4eme ligne de M.
M[,-5]# Enlève la 5eme colonne de M.

M[c(1 :2,4 :8),]# .....
M[c(1 :2,5),]##
M[-c(1 :2,5),]###
```

Création de matrice à partir de vecteurs et de matrices. 
```{r}
x=seq(0.5,10, by=0.5)
y=seq(2,15, length=10)
M2=cbind( x,y)
M3=cbind(M2,x)
z=seq(0,1, length=10)
M4=cbind(x,y,z)

M5=cbind(M2,M3)
M6=rbind(x,y)
M7=rbind(M5,z)
```

Remarque. Il est possible de créer des vecteurs et matrices contenant des lettres, mots,....
```{r}
c(1,"a","ddd")
c(1,"a","mon premier fichier R")
paste("a",1 :2,sep="")
paste("b","a",1 :4,sep="")
paste("b","a",1 :3,sep=".")
paste("b","a",1 :4,sep="")
```

Les objets list. Ce sont des objets concatènent peuvent contenir tout type d’objet de R (vecteurs, matrices, data.frame, fonctions, listes,...). 
```{r}
L=list(M,M2,M3,M4,M5,M6,M7)
L2=list(M,M2,M3,"ma première liste",c(1,2,3),mean)
L3=list(M,M2,M3,"ma première liste",c(1,2,3),mean, L2)
```
Afficher les éléments de la liste.
```{r}
L2[[1]] # affiche le premier élément de L2 (la matrice M)
L2[[4]] # affiche le 4eme élément de L2 (le texte "
L2[[6]] # affiche le 6eme élément de L2 (la fonction mean)
L2[[6]](c(1,2,3,4,5)) # applique la fonction mean au vecteur c(1,2,3,4,5)
L2[[5]][2] # affiche le 2eme élément du 5eme élément de L2 (le vecteur c(1,2,3))
L2[[5]][-2] # affiche le 2eme élément du 5eme élément de L2 (le vecteur c(1,2,3))
L2[[7]][[4]] # affiche le 4eme élément du 7eme élément de L2 (le texte "ma première liste")
L2[[7]][[6]](c(1,2,3,4,5)) # applique la fonction mean au vecteur c(1,2,3,4,5)
```

Data.frame Vs Matrice. Un data.frame est une matrice dans laquelle chaque colonne peut contenir un type de données différent (numérique, caractère, facteur,...). 
```{r}
df=data.frame(x=seq(1,10),y=seq(11,20),z=seq(21,30))
df2=data.frame(x=seq(1,10),y=seq(11,20),z=seq(21,30),w=letters[1:10])
df3=data.frame(x=seq(1,10),y=seq(11,20),z=seq(21,30),w=letters[1:10],v=as.factor(letters[1:10]))
```
Afficher les éléments du data.frame.
```{r}
df[1,] # affiche la 1ere ligne de df
df[,2] # affiche la 2eme colonne de df
```

Importation de données. Utiliser la fonction read.table pour importer des données au format texte (séparateur espace ou tabulation). Utiliser la fonction read.csv pour importer des données au format csv (séparateur virgule).
```{r}
data=read.table("https://raw.githubusercontent.com/michauxalex/TP_R_Analyse_de_donnees/main/donnees_exemple.txt", header=TRUE)
data2=read.csv("https://raw.githubusercontent.com/michauxalex/TP_R_Analyse_de_donnees/main/donnees_exemple.csv", header=TRUE)
```
Afficher les premières lignes du data.frame.
```{r}
head(data)
str(data)
summary(data)
```
Afficher les dimensions du data.frame.
```{r}
dim(data)
nrow(data)
ncol(data)
names(data)
rownames(data)
dimnames(data)
```
Afficher une colonne du data.frame.
```{r}
data$age # affiche la colonne age de data
data[,"age"] # affiche la colonne age de data
data[,2] # affiche la 2eme colonne de data
data[1:5,2] # affiche les 5 premières lignes de la 2eme colonne de data
data[1:5,c("age","taille")] # affiche les 5 premières lignes des colonnes age et taille de data
data[1:5,c(2,3)] # affiche les 5 premières lignes des colonnes age et taille de data
data[,c("age","taille")] # affiche les colonnes age et taille de data
data[data$age>30,] # affiche les lignes de data où l'âge est supérieur
data[data$age>30 & data$sexe=="F",] # affiche les lignes de data où l'âge est supérieur à 30 et le sexe est féminin
data[data$age>30 | data$sexe=="F",] # affiche les lignes de data où l'âge est supérieur à 30 ou le sexe est féminin
data[data$age>30 & data$sexe=="F",c("age","taille")] # affiche les lignes de data où l'âge est supérieur à 30 et le sexe est féminin, et les colonnes age et taille
data[data$age>30 | data$sexe=="F",c("age","taille")] # affiche les lignes de data où l'âge est supérieur à 30 ou le sexe est féminin, et les colonnes age et taille
```

















